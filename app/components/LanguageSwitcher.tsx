'use client';\n\nimport { useState } from 'react';\nimport { useI18n } from '../hooks/useI18n';\nimport GlassmorphicCard from './ui/GlassmorphicCard';\n\ninterface LanguageSwitcherProps {\n  className?: string;\n  showLabels?: boolean;\n  variant?: 'compact' | 'full' | 'dropdown';\n}\n\nexport default function LanguageSwitcher({ \n  className = '', \n  showLabels = true, \n  variant = 'dropdown' \n}: LanguageSwitcherProps) {\n  const { currentLocale, switchLanguage, supportedLocales, localeNames, localeFlags, isLoading } = useI18n();\n  const [isOpen, setIsOpen] = useState(false);\n\n  const handleLanguageChange = async (locale: typeof supportedLocales[number]) => {\n    if (locale === currentLocale) return;\n    \n    setIsOpen(false);\n    await switchLanguage(locale);\n  };\n\n  // Compact 버전 (플래그만)\n  if (variant === 'compact') {\n    return (\n      <div className={`relative ${className}`}>\n        <button\n          onClick={() => setIsOpen(!isOpen)}\n          className=\"flex items-center justify-center w-10 h-10 rounded-full bg-white/10 hover:bg-white/20 transition-all duration-200 backdrop-blur-sm border border-white/20\"\n          disabled={isLoading}\n          aria-label={`현재 언어: ${localeNames[currentLocale]}. 언어 변경`}\n        >\n          <span className=\"text-lg\">{localeFlags[currentLocale]}</span>\n        </button>\n        \n        {isOpen && (\n          <GlassmorphicCard \n            variant=\"light\" \n            blur=\"md\" \n            className=\"absolute top-12 right-0 z-50 min-w-[200px] p-2 animate-elegant-fade-in\"\n          >\n            <div className=\"space-y-1\">\n              {supportedLocales.map((locale) => (\n                <button\n                  key={locale}\n                  onClick={() => handleLanguageChange(locale)}\n                  className={`w-full flex items-center gap-3 px-3 py-2 text-left rounded-lg transition-all duration-200 ${\n                    locale === currentLocale\n                      ? 'bg-blue-500/20 text-blue-600 font-medium'\n                      : 'hover:bg-white/10 text-gray-700 dark:text-gray-300'\n                  }`}\n                  disabled={isLoading}\n                >\n                  <span className=\"text-lg\">{localeFlags[locale]}</span>\n                  <span className=\"flex-1\">{localeNames[locale]}</span>\n                  {locale === currentLocale && (\n                    <svg className=\"w-4 h-4 text-blue-500\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                      <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n                    </svg>\n                  )}\n                </button>\n              ))}\n            </div>\n          </GlassmorphicCard>\n        )}\n        \n        {/* 배경 클릭으로 닫기 */}\n        {isOpen && (\n          <div \n            className=\"fixed inset-0 z-40\" \n            onClick={() => setIsOpen(false)}\n            aria-hidden=\"true\"\n          />\n        )}\n      </div>\n    );\n  }\n\n  // Full 버전 (모든 언어 버튼)\n  if (variant === 'full') {\n    return (\n      <div className={`flex flex-wrap gap-2 ${className}`}>\n        {supportedLocales.map((locale) => (\n          <button\n            key={locale}\n            onClick={() => handleLanguageChange(locale)}\n            className={`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${\n              locale === currentLocale\n                ? 'bg-blue-500 text-white shadow-lg'\n                : 'bg-white/10 hover:bg-white/20 text-gray-700 dark:text-gray-300 backdrop-blur-sm border border-white/20'\n            }`}\n            disabled={isLoading}\n            aria-label={`${localeNames[locale]}로 언어 변경`}\n          >\n            <span>{localeFlags[locale]}</span>\n            {showLabels && <span>{localeNames[locale]}</span>}\n          </button>\n        ))}\n      </div>\n    );\n  }\n\n  // Dropdown 버전 (기본)\n  return (\n    <div className={`relative ${className}`}>\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg backdrop-blur-sm border border-white/20 transition-all duration-200 min-w-[140px]\"\n        disabled={isLoading}\n        aria-label={`현재 언어: ${localeNames[currentLocale]}. 언어 변경`}\n        aria-expanded={isOpen}\n        aria-haspopup=\"listbox\"\n      >\n        <span className=\"text-lg\">{localeFlags[currentLocale]}</span>\n        {showLabels && (\n          <span className=\"flex-1 text-left text-sm font-medium text-gray-700 dark:text-gray-300\">\n            {localeNames[currentLocale]}\n          </span>\n        )}\n        <svg \n          className={`w-4 h-4 text-gray-500 transition-transform duration-200 ${\n            isOpen ? 'rotate-180' : ''\n          }`} \n          fill=\"none\" \n          stroke=\"currentColor\" \n          viewBox=\"0 0 24 24\"\n        >\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n        </svg>\n      </button>\n      \n      {isOpen && (\n        <GlassmorphicCard \n          variant=\"light\" \n          blur=\"md\" \n          className=\"absolute top-12 left-0 z-50 min-w-[200px] p-2 animate-elegant-fade-in\"\n          role=\"listbox\"\n          aria-label=\"언어 선택\"\n        >\n          <div className=\"space-y-1\">\n            {supportedLocales.map((locale) => (\n              <button\n                key={locale}\n                onClick={() => handleLanguageChange(locale)}\n                className={`w-full flex items-center gap-3 px-3 py-2 text-left rounded-lg transition-all duration-200 ${\n                  locale === currentLocale\n                    ? 'bg-blue-500/20 text-blue-600 font-medium'\n                    : 'hover:bg-white/10 text-gray-700 dark:text-gray-300'\n                }`}\n                disabled={isLoading}\n                role=\"option\"\n                aria-selected={locale === currentLocale}\n                aria-label={`${localeNames[locale]}로 언어 변경`}\n              >\n                <span className=\"text-lg\">{localeFlags[locale]}</span>\n                <span className=\"flex-1\">{localeNames[locale]}</span>\n                {locale === currentLocale && (\n                  <svg className=\"w-4 h-4 text-blue-500\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n                  </svg>\n                )}\n              </button>\n            ))}\n          </div>\n        </GlassmorphicCard>\n      )}\n      \n      {/* 배경 클릭으로 닫기 */}\n      {isOpen && (\n        <div \n          className=\"fixed inset-0 z-40\" \n          onClick={() => setIsOpen(false)}\n          aria-hidden=\"true\"\n        />\n      )}\n    </div>\n  );\n}"